<div class="table-responsive">
  <table class="table table-bordered table-hover mb-0 align-middle">
    <thead class="table-light">
      <tr>
        <th>Application Number</th>
        <th>Applicant Name</th>
        <th>Trade Name</th>
        <th>Mobile Number</th>
        <th>Zone</th>
        <th>MOH</th>
        <th>Ward</th>
        <th>Status</th>
        <th>Submit Date</th>
        <th class="text-center">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="isLoading">
        <td colspan="10" class="text-center py-3">Loading applications...</td>
      </tr>

      <tr *ngFor="let app of applications" class="clickable-row" (click)="onRowClicked(app)">
        <td class="app-number-cell">{{ app.applicationNumber || '-' }}</td>
        <td>{{ app.applicantName || '-' }}</td>
        <td>{{ app.tradeName || '-' }}</td>
        <td>{{ app.mobileNumber || '-' }}</td>
        <td>{{ app.zoneName || '-' }}</td>
        <td>{{ app.mohName || '-' }}</td>
        <td>{{ app.wardName || '-' }}</td>
        <td>
          <span [class]="getStatusBadgeClass(app.licenceApplicationStatusName)">
            {{ app.licenceApplicationStatusName || '-' }}
          </span>
        </td>
        <td>{{ app.applicationSubmitDate | date: 'dd-MMM-yyyy' }}</td>
        <td class="text-center">
          <button
            class="btn btn-outline-primary btn-sm"
            type="button"
            title="View Generated Licence"
            (click)="onViewClicked(app); $event.stopPropagation()"
          >
            <span class="eye-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" focusable="false">
                <path
                  d="M12 5C6.5 5 2 9.1 1 12c1 2.9 5.5 7 11 7s10-4.1 11-7c-1-2.9-5.5-7-11-7zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"
                ></path>
                <circle cx="12" cy="12" r="2.3"></circle>
              </svg>
            </span>
            View Licence
          </button>
        </td>
      </tr>

      <tr *ngIf="!isLoading && applications.length === 0">
        <td colspan="10" class="text-center text-muted py-3">No Data Found</td>
      </tr>
    </tbody>
  </table>
</div>

<div class="table-footer">
  <div class="d-flex align-items-center gap-3 flex-wrap">
    <div class="text-muted small">
      Total Records: {{ totalRecords }}
    </div>
    <div class="text-muted small">
      Showing {{ showingFrom }} - {{ showingTo }} of {{ totalRecords }}
    </div>
  </div>

  <div class="d-flex align-items-center gap-2">
    <label class="small text-muted mb-0">Page Size</label>
    <select
      class="form-select form-select-sm page-size-select"
      [ngModel]="pageSize"
      (ngModelChange)="onPageSizeChanged($event)"
    >
      <option *ngFor="let option of pageSizeOptions" [ngValue]="option">
        {{ option }}
      </option>
    </select>

    <nav>
      <ul class="pagination pagination-sm mb-0">
        <li class="page-item" [class.disabled]="pageNumber === 1">
          <button class="page-link" type="button" (click)="onPageChanged(pageNumber - 1)">
            Prev
          </button>
        </li>
        <li class="page-item" *ngFor="let p of pages" [class.active]="p === pageNumber">
          <button class="page-link" type="button" (click)="onPageChanged(p)">
            {{ p }}
          </button>
        </li>
        <li class="page-item" [class.disabled]="pageNumber === totalPages">
          <button class="page-link" type="button" (click)="onPageChanged(pageNumber + 1)">
            Next
          </button>
        </li>
      </ul>
    </nav>
  </div>
</div>
