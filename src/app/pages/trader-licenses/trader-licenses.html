<main class="content">
      <!-- Welcome -->
      <h2 class="welcome-title">Welcome back, {{ userName }}!</h2>
      <p class="welcome-subtitle">
        Here's an overview of your trade licenses and applications
      </p>

      <div class="inspection-modal-backdrop" *ngIf="showInspectionDisclaimer"></div>
      <div
        class="inspection-modal"
        *ngIf="showInspectionDisclaimer"
        role="dialog"
        aria-modal="true"
        aria-labelledby="inspectionDisclaimerTitle"
      >
        <div class="inspection-modal-icon">
          <i class="bi bi-shield-exclamation"></i>
        </div>
        <h5 id="inspectionDisclaimerTitle">Trade Licence Compliance Disclaimer</h5>
        <p class="modal-intro">
          By submitting an application for a Trade Licence through this portal, the applicant hereby acknowledges and agrees to the following:
        </p>
        <ol class="disclaimer-points">
          <li>
            <strong>Right of Inspection:</strong>
            The Competent Authority reserves the right to conduct inspections, including surprise inspections, at the business premises at any stage, whether during the processing of the application or after the licence has been granted.
          </li>
          <li>
            <strong>Verification of Information:</strong>
            All information, declarations, and documents submitted by the applicant are subject to verification. The applicant shall be solely responsible for the accuracy, authenticity, and completeness of the details provided.
          </li>
          <li>
            <strong>Violation and Misrepresentation:</strong>
            If any false declaration, misrepresentation, suppression of facts, submission of forged documents, or violation of applicable laws, rules, or licence conditions is detected at any time, the Trade Licence shall be liable for immediate suspension or cancellation without prior notice.
          </li>
          <li>
            <strong>Legal Action:</strong>
            In addition to cancellation, the Authority reserves the right to initiate appropriate legal proceedings, penalties, or other actions as permitted under the relevant Act, Rules, and Government Notifications.
          </li>
          <li>
            <strong>Binding Acceptance:</strong>
            Submission of the application shall be deemed as the applicant's unconditional acceptance of all statutory provisions, inspection procedures, and regulatory requirements governing the Trade Licence.
          </li>
        </ol>
        <label class="declaration-check">
          <input
            type="checkbox"
            [(ngModel)]="inspectionDeclarationAccepted"
            name="inspectionDeclarationAccepted"
          />
          <span>
            I hereby declare that the information provided is true and correct to the best of my knowledge and agree to comply with all applicable laws, inspection procedures, and licence conditions.
          </span>
        </label>
        <button
          type="button"
          class="btn btn-warning btn-sm px-3"
          (click)="dismissInspectionDisclaimer()"
          [disabled]="!inspectionDeclarationAccepted"
        >
          Accept and Continue
        </button>
      </div>

      <!-- Alerts -->
      <div class="alert-box warning">
        <i class="bi bi-exclamation-circle"></i>
        License renewal due in 30 days for Sharma Food Corner
      </div>

      <div class="alert-box info">
        <i class="bi bi-info-circle"></i>
        Inspection scheduled for Sharma Textiles on 15 Dec 2024
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <div class="quick-card" routerLink="/trader/new-licenses" role="button" tabindex="0">
          <div class="quick-icon warning">
            <i class="bi bi-plus"></i>
          </div>
          <h6>Apply for New License</h6>
          <p>Start a new trade license application</p>
        </div>

        <div class="quick-card" routerLink="/trader/renew-license" role="button" tabindex="0">
          <div class="quick-icon success">
            <i class="bi bi-arrow-repeat"></i>
          </div>
          <h6>Renew License</h6>
          <p>Renew an existing trade license</p>
        </div>

        <div class="quick-card" routerLink="/trader/track-application" role="button" tabindex="0">
          <div class="quick-icon primary">
            <i class="bi bi-geo-alt"></i>
          </div>
          <h6>Track Application</h6>
          <p>Check application status</p>
        </div>
      </div>

      <!-- My Licenses -->
      <h5 class="section-title">My Licenses</h5>

      <div class="license-card">
        <div class="license-left">
          <h6>
            Sharma Electronics
            <span class="status active">Active</span>
          </h6>
          <p class="muted">Retail - Electronics</p>
          <p class="muted">
            <i class="bi bi-geo-alt"></i>
            123, MG Road, Bengaluru - 560001
          </p>
        </div>

        <div class="license-right">
          <small class="muted">Valid Until</small>
          <strong>31 Mar 2025</strong>

          <button class="btn btn-outline-secondary btn-sm rounded-pill mt-2">
            <i class="bi bi-download"></i>
            Certificate
          </button>
        </div>
      </div>

      <div class="section-header">
        <h5>Draft Applications</h5>
        <a
          class="view-all"
          *ngIf="allLicensesApplications.length > 1"
          (click)="showAll = !showAll"
          style="cursor: pointer"
        >
          {{ showAll ? 'View Less' : 'View All' }}
        </a>
      </div>

      <!-- LICENSE CARD -->
      <div
        class="license-card"
        *ngFor="
          let app of allLicensesApplications
            | slice: 0 : (showAll ? allLicensesApplications.length : 1)
        "
      >
        <div class="license-left">
          <h6>
            {{ app.tradeName }}
            <span class="status review">{{ app.applicationStatus }}</span>
          </h6>

          <p class="muted">
            Licenses Application Id : {{ app.licenceApplicationID }} - Trade Licenses Id : {{ app.tradeLicenceID }}
          </p>

          <p class="muted">
            <i class="bi bi-calendar"></i>
            Submitted:
            {{ app.applicationSubmitDate | date: 'dd MMM yyyy' }}
            &nbsp;&nbsp;
            <i class="bi bi-clock"></i>
            Working
          </p>

          <!-- ACTION LINKS -->
          <div class="license-actions">
            <a (click)="openApplication(app.licenceApplicationID)">View</a>
            <span>|</span>
            <a (click)="makePayment(app.licenceApplicationID)">Pay Now</a>
          </div>
        </div>

        <div class="license-right">
          <small class="muted">Progress</small>

          <div class="progress thin">
            <div
              class="progress-bar"
              [style.width.%]="getProgress(app.applicationStatus)"
            ></div>
          </div>

          <small>{{ getProgress(app.applicationStatus) }}%</small>
        </div>
      </div>
    </main>
