<div class="dashboard-wrapper">

  <!-- TOP BAR -->
  <header class="topbar">
    <div class="topbar-left">

      <button class="sidebar-toggle" (click)="toggleSidebar()">
        <i class="bi bi-list"></i>
      </button>

      <div class="logo-box">
        <i class="bi bi-building"></i>
      </div>

      <div class="brand-text">
        <div class="title">GBA Trade License</div>
        <small class="subtitle">Trader Portal</small>
      </div>
    </div>

    <div class="topbar-right">
      <button class="icon-btn position-relative">
        <i class="bi bi-bell"></i>
        <span class="badge bg-danger notification-count">2</span>
      </button>

      <div class="user-info">
        <div class="name">{{ userFullName }}</div>
        <small class="email">{{ userEmailID }}</small>
      </div>
    </div>
  </header>

  <!-- BODY -->
  <div class="dashboard-body">

    <!-- SIDEBAR -->
    <aside class="sidebar" [class.collapsed]="isSidebarCollapsed">

      <nav class="menu" *ngIf="role === 'admin'">
        <a class="menu-item" routerLink="/admin" routerLinkActive="active">
          <i class="bi bi-speedometer2"></i>
          <span>Dashboard</span>
        </a>

        <a class="menu-item" routerLink="/admin/user-roles" routerLinkActive="active">
          <i class="bi bi-people"></i>
          <span>Users & Roles</span>
        </a>

        <a class="menu-item" routerLink="/admin/system-settings" routerLinkActive="active">
          <i class="bi bi-gear"></i>
          <span>System Settings</span>
        </a>

        <!-- <a class="menu-item" routerLink="/admin/workflows" routerLinkActive="active">
          <i class="bi bi-diagram-3"></i>
          <span>Approval Workflows</span>
        </a> -->
        <div class="menu-group">
          <div class="menu-item"
              (click)="toggleWorkflowMenu()"
              [class.active]="isWorkflowMenuOpen">
            <i class="bi bi-diagram-3"></i>
            <span>Approval Workflows</span>
            <i class="bi bi-chevron-down ms-auto small"></i>
          </div>
          <div class="submenu" *ngIf="isWorkflowMenuOpen">
            <a class="menu-item submenu-item"
              routerLink="/admin/workflows/approving-officer"
              routerLinkActive="active">
              <i class="bi bi-dot"></i>
              <span>Approving Officer</span>
            </a>
            <a class="menu-item submenu-item"
              routerLink="/admin/workflows/senior-approving-officer"
              routerLinkActive="active">
              <i class="bi bi-dot"></i>
              <span>Senior Approving Officer</span>
            </a>
          </div>
        </div>



        <a class="menu-item" routerLink="/admin/master-data-compliance" routerLinkActive="active">
          <i class="bi bi-database"></i>
          <span>Master Data</span>
        </a>

        <!-- <a class="menu-item" routerLink="/admin/compliance" routerLinkActive="active">
          <i class="bi bi-shield-check"></i>
          <span>Compliance Rules</span>
        </a> -->
        <!-- <a
          class="menu-item"
          routerLink="/payments"
          routerLinkActive="active"
          >
          <i class="bi bi-credit-card"></i>
          Payments
        </a> -->

        <!-- <a class="menu-item" routerLink="/admin/monitoring" routerLinkActive="active">
          <i class="bi bi-activity"></i>
          <span>System Monitoring</span>
        </a> -->

        <a class="menu-item" routerLink="/admin/reports" routerLinkActive="active">
          <i class="bi bi-file-earmark-text"></i>
          <span>Reports</span>
        </a>
      </nav>

      <nav class="menu" *ngIf="role === 'seniorapprover'">
        <a class="menu-item" routerLink="/senior-approver" routerLinkActive="active">
          <i class="bi bi-speedometer2"></i>
          <span>Dashboard</span>
        </a>

        <a class="menu-item" routerLink="/senior-approver/senior-approving-officer" routerLinkActive="active">
          <i class="bi bi-diagram-3"></i>
          <span>Approval Workflows</span>
        </a>

        <a class="menu-item" routerLink="/admin/reports" routerLinkActive="active">
          <i class="bi bi-file-earmark-text"></i>
          <span>Reports</span>
        </a>
      </nav>

      <nav class="menu" *ngIf="role === 'approver'">
        <a class="menu-item" routerLink="/approver" routerLinkActive="active">
          <i class="bi bi-speedometer2"></i>
          <span>Dashboard</span>
        </a>
        
        <a class="menu-item" routerLink="/approver/approving-officer" routerLinkActive="active">
          <i class="bi bi-diagram-3"></i>
          <span>Approval Workflows</span>
        </a>

        <a class="menu-item" routerLink="/admin/reports" routerLinkActive="active">
          <i class="bi bi-file-earmark-text"></i>
          <span>Reports</span>
        </a>
      </nav>
  

      <nav class="menu" *ngIf="role === 'TRADE_OWNER'">

        <a class="menu-item"
          routerLink="/trader"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }">
          <i class="bi bi-speedometer2"></i>
          Dashboard
        </a>

        <a class="menu-item"
          routerLink="/trader/new-licenses"
          routerLinkActive="active">
          <i class="bi bi-plus-circle"></i>
          New Application
        </a>

        <a class="menu-item"
          routerLink="/trader/trader-licenses"
          routerLinkActive="active">
          <i class="bi bi-check-circle"></i>
          My Licenses
        </a>

        <a class="menu-item"
          routerLink="/trader/renew-license"
          routerLinkActive="active">
          <i class="bi bi-credit-card"></i>
          Renew License
        </a>

        <a class="menu-item"
          routerLink="/trader/renewal-status"
          routerLinkActive="active">
          <i class="bi bi-credit-card"></i>
          Renew Status
        </a>

      </nav>

      <div class="sidebar-footer">
        <button class="signout-btn" (click)="logout()">
          <i class="bi bi-box-arrow-right"></i>
          <span>Sign Out</span>
        </button>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
